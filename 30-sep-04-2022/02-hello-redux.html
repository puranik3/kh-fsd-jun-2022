<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Hello Redux</title>
    </head>
    <body>
        <div>
            <button id="decrement" onclick="store.dispatch( { type: DECREMENT } )">-</button>
            <span id="counter">0</span>
            <button id="increment" onclick="store.dispatch( { type: INCREMENT } )">+</button>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/redux/4.2.0/redux.min.js"></script>

        <script>
            /**
             * Data is global when using Redux
             * Store is the "safe-keeper" for this global data ("state"). It is the only thing that can change the data in the app
             */
            
            // action type
            const INCREMENT = 'INCREMENT';
            const DECREMENT = 'DECREMENT';

            /**
             * Store uses the "reducer". The reducer is a function, which knows what changes to make to the state.
             * 
             * "action" is how the Redux store informs the reducer "what happened in the app"
             * Action is an object with a type property that indicates what happened in the app
             * The reducer MUST return the new state. If it does not handle an action, it must return the new state without any change.
             */
            const reducer = ( state, action ) => {
                // console.log( 'reducer called' );
                // console.log( state, action );

                switch( action.type ) {
                    case INCREMENT:
                        return state + 1;
                    case DECREMENT:
                        return state - 1;
                    default:
                        return state;
                }
            };

            // the first argument to createStore is the reducer
            // the second argument to createStore is the state (could be primtive, array, object)
            const store = Redux.createStore( reducer, 0 );

            const render = () => {
                document.getElementById( 'counter' ).innerText = store.getState();
            }

            // we pass a callback function to store.subscribe(). it iw called on every state change. This callback is used to update the UI.
            store.subscribe( render );
        </script>
    </body>
</html>